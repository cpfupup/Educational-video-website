!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self,t.XgSubtitle=e())}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=k(e),this.reject=k(n)}function r(t){var e=t.length;return 3===e?(60*(60*Number(t[0])+Number(t[1]))*1e3+1e3*Number(t[2]))/1e3:2===e?(60*Number(t[0])*1e3+1e3*Number(t[1]))/1e3:Number(t[0])}function i(t){return/^(\-|\+)?\d+(\.\d+)?$/.test(t)}function o(t){return t}function a(t,e){return t>=0&&t<e.length?e[t]:""}function s(t,e){if(!t)return!1;if(t.classList)return Array.prototype.some.call(t.classList,function(t){return t===e});var n=t.className&&"object"===Ur(t.className)?t.getAttribute("class"):t.className;return n&&!!n.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function c(t,e){t&&(t.classList?e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(e){e&&t.classList.add(e)}):s(t,e)||(t.className&&"object"===Ur(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className+=" "+e))}function u(t,e){t&&(t.classList?e.split(/\s+/g).forEach(function(e){t.classList.remove(e)}):s(t,e)&&e.split(/\s+/g).forEach(function(e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===Ur(t.className)?t.setAttribute("class",t.getAttribute("class").replace(n," ")):t.className=t.className.replace(n," ")}))}function l(t,e,n){var r=e.length;if(r<1)return-1;if(n=n<0?0:n>=r?r-1:n,e[n].start<=t&&t<e[n].end)return n;for(var i=e[n].end<=t?n+1:0;i<r;i++){if(e[i].start<=t&&t<e[i].end)return i;if(t>e[i].end&&i+1<r&&t<e[i+1].start)return-1;if(t>e[i].end&&i+1>=r)return-1}return-1}function f(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]}function h(){var t=navigator.userAgent,e=/(?:Windows Phone)/.test(t),n=/(?:SymbianOS)/.test(t)||e,r=/(?:Android)/.test(t),i=/(?:Firefox)/.test(t),o=/(?:iPad|PlayBook)/.test(t)||r&&!/(?:Mobile)/.test(t)||i&&/(?:Tablet)/.test(t);return/(?:iPhone)/.test(t)&&!o||r||n||o}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";t.map(function(t){n+=" "+e+" "+t.key+" {"+t.style+"}"});var r=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];if(r.type="text/css",r.id="ssss",r.styleSheet){var o=function(){try{style.styleSheet.cssText=n}catch(t){}};r.styleSheet.disabled?setTimeout(o,10):o()}else{var a=document.createTextNode(n);r.appendChild(a)}i.appendChild(r)}function d(t,e){Kr||(Kr=new $r),Kr.addObserver(t,e)}function v(t,e){Kr&&Kr.unObserver(t,e)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={code:Xr[t].code,msg:Xr[t].msg};return an(e).map(function(t){n[t]=e[t]}),n}function g(t){return new rn(function(e,n){t.list&&e(t),new Cn({url:t.url,type:"text"}).then(function(r){Un.parse(r.res.response,function(r,i){if(i){var o=y(2,i);console.trace(o),n(o,{format:r.format})}else if(r.format)t.list=r.list,t.format=r.format,t.styles=r.styles,e(t);else{var a=y(3);console.trace(a),n(a)}})}).catch(function(t){var e=y(1,{statusText:t.statusText,status:t.status,type:t.type,message:"http load error"});console.trace(e),n(e)})})}function m(t,e){return!!(t.id&&t.id===e.id||t.language&&t.language===e.language)}var _=t(e(function(t,e){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}})),b=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),x=e(function(t){var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)}),k=(x.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),w=function(t,e,n){if(k(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},T=function(t){return"object"==typeof t?null!==t:"function"==typeof t},S=function(t){if(!T(t))throw TypeError(t+" is not an object!");return t},O=function(t){try{return!!t()}catch(t){return!0}},j=!O(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),P=b.document,E=T(P)&&T(P.createElement),M=function(t){return E?P.createElement(t):{}},A=!j&&!O(function(){return 7!=Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a}),R=function(t,e){if(!T(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!T(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!T(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!T(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},L=Object.defineProperty,C={f:j?Object.defineProperty:function(t,e,n){if(S(t),e=R(e,!0),S(n),A)try{return L(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},N=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},I=j?function(t,e,n){return C.f(t,e,N(1,n))}:function(t,e,n){return t[e]=n,t},F={}.hasOwnProperty,z=function(t,e){return F.call(t,e)},B=function(t,e,n){var r,i,o,a=t&B.F,s=t&B.G,c=t&B.S,u=t&B.P,l=t&B.B,f=t&B.W,h=s?x:x[e]||(x[e]={}),p=h.prototype,d=s?b:c?b[e]:(b[e]||{}).prototype;s&&(n=e);for(r in n)(i=!a&&d&&void 0!==d[r])&&z(h,r)||(o=i?d[r]:n[r],h[r]=s&&"function"!=typeof d[r]?n[r]:l&&i?w(o,b):f&&d[r]==o?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(o):u&&"function"==typeof o?w(Function.call,o):o,u&&((h.virtual||(h.virtual={}))[r]=o,t&B.R&&p&&!p[r]&&I(p,r,o)))};B.F=1,B.G=2,B.S=4,B.P=8,B.B=16,B.W=32,B.U=64,B.R=128;var H=B;H(H.S+H.F*!j,"Object",{defineProperty:C.f});var V=x.Object,D=function(t,e,n){return V.defineProperty(t,e,n)},W=e(function(t){t.exports={default:D,__esModule:!0}});t(W);var G=t(e(function(t,e){e.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(W);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(t,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()})),U=Math.ceil,$=Math.floor,K=function(t){return isNaN(t=+t)?0:(t>0?$:U)(t)},X=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},Y=I,J={},q={}.toString,Z=function(t){return q.call(t).slice(8,-1)},Q=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Z(t)?t.split(""):Object(t)},tt=function(t){return Q(X(t))},et=Math.min,nt=function(t){return t>0?et(K(t),9007199254740991):0},rt=Math.max,it=Math.min,ot=function(t,e){return t=K(t),t<0?rt(t+e,0):it(t,e)},at=e(function(t){var e=b["__core-js_shared__"]||(b["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:x.version,mode:"pure",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),st=0,ct=Math.random(),ut=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++st+ct).toString(36))},lt=at("keys"),ft=function(t){return lt[t]||(lt[t]=ut(t))},ht=function(t){return function(e,n,r){var i,o=tt(e),a=nt(o.length),s=ot(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}}(!1),pt=ft("IE_PROTO"),dt=function(t,e){var n,r=tt(t),i=0,o=[];for(n in r)n!=pt&&z(r,n)&&o.push(n);for(;e.length>i;)z(r,n=e[i++])&&(~ht(o,n)||o.push(n));return o},vt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),yt=Object.keys||function(t){return dt(t,vt)},gt=j?Object.defineProperties:function(t,e){S(t);for(var n,r=yt(e),i=r.length,o=0;i>o;)C.f(t,n=r[o++],e[n]);return t},mt=b.document,_t=mt&&mt.documentElement,bt=ft("IE_PROTO"),xt=function(){},kt=function(){var t,e=M("iframe"),n=vt.length;for(e.style.display="none",_t.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),kt=t.F;n--;)delete kt.prototype[vt[n]];return kt()},wt=Object.create||function(t,e){var n;return null!==t?(xt.prototype=S(t),n=new xt,xt.prototype=null,n[bt]=t):n=kt(),void 0===e?n:gt(n,e)},Tt=e(function(t){var e=at("wks"),n=b.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:ut)("Symbol."+t))}).store=e}),St=C.f,Ot=Tt("toStringTag"),jt=function(t,e,n){t&&!z(t=n?t:t.prototype,Ot)&&St(t,Ot,{configurable:!0,value:e})},Pt={};I(Pt,Tt("iterator"),function(){return this});var Et=function(t,e,n){t.prototype=wt(Pt,{next:N(1,n)}),jt(t,e+" Iterator")},Mt=function(t){return Object(X(t))},At=ft("IE_PROTO"),Rt=Object.prototype,Lt=Object.getPrototypeOf||function(t){return t=Mt(t),z(t,At)?t[At]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Rt:null},Ct=Tt("iterator"),Nt=!([].keys&&"next"in[].keys()),It=function(){return this},Ft=function(t,e,n,r,i,o,a){Et(n,e,r);var s,c,u,l=function(t){if(!Nt&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",h="values"==i,p=!1,d=t.prototype,v=d[Ct]||d["@@iterator"]||i&&d[i],y=v||l(i),g=i?h?l("entries"):y:void 0,m="Array"==e?d.entries||v:v;if(m&&(u=Lt(m.call(new t)))!==Object.prototype&&u.next&&jt(u,f,!0),h&&v&&"values"!==v.name&&(p=!0,y=function(){return v.call(this)}),a&&(Nt||p||!d[Ct])&&I(d,Ct,y),J[e]=y,J[f]=It,i)if(s={values:h?y:l("values"),keys:o?y:l("keys"),entries:g},a)for(c in s)c in d||Y(d,c,s[c]);else H(H.P+H.F*(Nt||p),e,s);return s},zt=function(t){return function(e,n){var r,i,o=String(X(e)),a=K(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a),r<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536)}}(!0);Ft(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=zt(e,n),this._i+=t.length,{value:t,done:!1})});var Bt=function(t,e){return{value:e,done:!!t}};Ft(Array,"Array",function(t,e){this._t=tt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Bt(1)):"keys"==e?Bt(0,n):"values"==e?Bt(0,t[n]):Bt(0,[n,t[n]])},"values");J.Arguments=J.Array;for(var Ht=Tt("toStringTag"),Vt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Dt=0;Dt<Vt.length;Dt++){var Wt=Vt[Dt],Gt=b[Wt],Ut=Gt&&Gt.prototype;Ut&&!Ut[Ht]&&I(Ut,Ht,Wt),J[Wt]=J.Array}var $t,Kt,Xt,Yt=Tt("toStringTag"),Jt="Arguments"==Z(function(){return arguments}()),qt=function(t,e){try{return t[e]}catch(t){}},Zt=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=qt(e=Object(t),Yt))?n:Jt?Z(e):"Object"==(r=Z(e))&&"function"==typeof e.callee?"Arguments":r},Qt=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t},te=function(t,e,n,r){try{return r?e(S(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&S(i.call(t)),e}},ee=Tt("iterator"),ne=Array.prototype,re=function(t){return void 0!==t&&(J.Array===t||ne[ee]===t)},ie=Tt("iterator"),oe=x.getIteratorMethod=function(t){if(void 0!=t)return t[ie]||t["@@iterator"]||J[Zt(t)]},ae=e(function(t){var e={},n={},r=t.exports=function(t,r,i,o,a){var s,c,u,l,f=a?function(){return t}:oe(t),h=w(i,o,r?2:1),p=0;if("function"!=typeof f)throw TypeError(t+" is not iterable!");if(re(f)){for(s=nt(t.length);s>p;p++)if((l=r?h(S(c=t[p])[0],c[1]):h(t[p]))===e||l===n)return l}else for(u=f.call(t);!(c=u.next()).done;)if((l=te(u,h,c.value,r))===e||l===n)return l};r.BREAK=e,r.RETURN=n}),se=Tt("species"),ce=function(t,e){var n,r=S(t).constructor;return void 0===r||void 0==(n=S(r)[se])?e:k(n)},ue=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)},le=b.process,fe=b.setImmediate,he=b.clearImmediate,pe=b.MessageChannel,de=b.Dispatch,ve=0,ye={},ge=function(){var t=+this;if(ye.hasOwnProperty(t)){var e=ye[t];delete ye[t],e()}},me=function(t){ge.call(t.data)};fe&&he||(fe=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return ye[++ve]=function(){ue("function"==typeof t?t:Function(t),e)},$t(ve),ve},he=function(t){delete ye[t]},"process"==Z(le)?$t=function(t){le.nextTick(w(ge,t,1))}:de&&de.now?$t=function(t){de.now(w(ge,t,1))}:pe?(Xt=(Kt=new pe).port2,Kt.port1.onmessage=me,$t=w(Xt.postMessage,Xt,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts?($t=function(t){b.postMessage(t+"","*")},b.addEventListener("message",me,!1)):$t="onreadystatechange"in M("script")?function(t){_t.appendChild(M("script")).onreadystatechange=function(){_t.removeChild(this),ge.call(t)}}:function(t){setTimeout(w(ge,t,1),0)});var _e={set:fe,clear:he},be=_e.set,xe=b.MutationObserver||b.WebKitMutationObserver,ke=b.process,we=b.Promise,Te="process"==Z(ke),Se={f:function(t){return new n(t)}},Oe=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},je=b.navigator,Pe=je&&je.userAgent||"",Ee=function(t,e){if(S(t),T(e)&&e.constructor===t)return e;var n=Se.f(t);return(0,n.resolve)(e),n.promise},Me=Tt("species"),Ae=Tt("iterator"),Re=!1;try{var Le=[7][Ae]();Le.return=function(){Re=!0},Array.from(Le,function(){throw 2})}catch(t){}var Ce,Ne,Ie,Fe,ze=_e.set,Be=function(){var t,e,n,r=function(){var r,i;for(Te&&(r=ke.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(Te)n=function(){ke.nextTick(r)};else if(!xe||b.navigator&&b.navigator.standalone)if(we&&we.resolve){var i=we.resolve(void 0);n=function(){i.then(r)}}else n=function(){be.call(b,r)};else{var o=!0,a=document.createTextNode("");new xe(r).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}(),He=b.TypeError,Ve=b.process,De=Ve&&Ve.versions,We=De&&De.v8||"",Ge=b.Promise,Ue="process"==Zt(Ve),$e=function(){},Ke=Ne=Se.f,Xe=!!function(){try{var t=Ge.resolve(1),e=(t.constructor={})[Tt("species")]=function(t){t($e,$e)};return(Ue||"function"==typeof PromiseRejectionEvent)&&t.then($e)instanceof e&&0!==We.indexOf("6.6")&&-1===Pe.indexOf("Chrome/66")}catch(t){}}(),Ye=function(t){var e;return!(!T(t)||"function"!=typeof(e=t.then))&&e},Je=function(t,e){if(!t._n){t._n=!0;var n=t._c;Be(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a,s=i?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(i||(2==t._h&&Qe(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?u(He("Promise-chain cycle")):(o=Ye(n))?o.call(n,c,u):c(n)):u(r)}catch(t){l&&!a&&l.exit(),u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&qe(t)})}},qe=function(t){ze.call(b,function(){var e,n,r,i=t._v,o=Ze(t);if(o&&(e=Oe(function(){Ue?Ve.emit("unhandledRejection",i,t):(n=b.onunhandledrejection)?n({promise:t,reason:i}):(r=b.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=Ue||Ze(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},Ze=function(t){return 1!==t._h&&0===(t._a||t._c).length},Qe=function(t){ze.call(b,function(){var e;Ue?Ve.emit("rejectionHandled",t):(e=b.onrejectionhandled)&&e({promise:t,reason:t._v})})},tn=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Je(e,!0))},en=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw He("Promise can't be resolved itself");(e=Ye(t))?Be(function(){var r={_w:n,_d:!1};try{e.call(t,w(en,r,1),w(tn,r,1))}catch(t){tn.call(r,t)}}):(n._v=t,n._s=1,Je(n,!1))}catch(t){tn.call({_w:n,_d:!1},t)}}};Xe||(Ge=function(t){Qt(this,Ge,"Promise","_h"),k(t),Ce.call(this);try{t(w(en,this,1),w(tn,this,1))}catch(t){tn.call(this,t)}},(Ce=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:I(t,r,e[r]);return t}(Ge.prototype,{then:function(t,e){var n=Ke(ce(this,Ge));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=Ue?Ve.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Je(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ie=function(){var t=new Ce;this.promise=t,this.resolve=w(en,t,1),this.reject=w(tn,t,1)},Se.f=Ke=function(t){return t===Ge||t===Fe?new Ie(t):Ne(t)}),H(H.G+H.W+H.F*!Xe,{Promise:Ge}),jt(Ge,"Promise"),function(t){var e="function"==typeof x[t]?x[t]:b[t];j&&e&&!e[Me]&&C.f(e,Me,{configurable:!0,get:function(){return this}})}("Promise"),Fe=x.Promise,H(H.S+H.F*!Xe,"Promise",{reject:function(t){var e=Ke(this);return(0,e.reject)(t),e.promise}}),H(H.S+!0*H.F,"Promise",{resolve:function(t){return Ee(this===Fe?Ge:this,t)}}),H(H.S+H.F*!(Xe&&function(t,e){if(!e&&!Re)return!1;var n=!1;try{var r=[7],i=r[Ae]();i.next=function(){return{done:n=!0}},r[Ae]=function(){return i},t(r)}catch(t){}return n}(function(t){Ge.all(t).catch($e)})),"Promise",{all:function(t){var e=this,n=Ke(e),r=n.resolve,i=n.reject,o=Oe(function(){var n=[],o=0,a=1;ae(t,!1,function(t){var s=o++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=Ke(e),r=n.reject,i=Oe(function(){ae(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),H(H.P+H.R,"Promise",{finally:function(t){var e=ce(this,x.Promise||b.Promise),n="function"==typeof t;return this.then(n?function(n){return Ee(e,t()).then(function(){return n})}:t,n?function(n){return Ee(e,t()).then(function(){throw n})}:t)}}),H(H.S,"Promise",{try:function(t){var e=Se.f(this),n=Oe(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var nn=x.Promise,rn=t(e(function(t){t.exports={default:nn,__esModule:!0}}));!function(t,e){var n=(x.Object||{})[t]||Object[t],r={};r[t]=e(n),H(H.S+H.F*O(function(){n(1)}),"Object",r)}("keys",function(){return function(t){return yt(Mt(t))}});var on=x.Object.keys,an=t(e(function(t){t.exports={default:on,__esModule:!0}})),sn=function(t){return void 0!==t&&null!==t},cn={object:!0,function:!0,undefined:!0},un=function(t){return!!sn(t)&&hasOwnProperty.call(cn,typeof t)},ln=function(t){if(!un(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}},fn=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!ln(t)},hn=/^\s*class[\s{/}]/,pn=Function.prototype.toString,dn=function(t){return!!fn(t)&&!hn.test(pn.call(t))},vn=function(t){return void 0!==t&&null!==t},yn=Object.keys,gn=function(t){return yn(vn(t)?Object(t):t)},mn=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}()?Object.keys:gn,_n=function(t){if(!vn(t))throw new TypeError("Cannot use null or undefined");return t},bn=Math.max,xn=function(t,e){var n,r,i,o=bn(arguments.length,2);for(t=Object(_n(t)),i=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},r=1;r<o;++r)e=arguments[r],mn(e).forEach(i);if(void 0!==n)throw n;return t},kn=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}()?Object.assign:xn,wn=Array.prototype.forEach,Tn=Object.create,Sn=function(t,e){var n;for(n in t)e[n]=t[n]},On=function(t){var e=Tn(null);return wn.call(arguments,function(t){vn(t)&&Sn(Object(t),e)}),e},jn="razdwatrzy",Pn=String.prototype.indexOf,En=function(t){return Pn.call(this,t,arguments[1])>-1},Mn=function(){return"function"==typeof jn.contains&&(!0===jn.contains("dwa")&&!1===jn.contains("foo"))}()?String.prototype.contains:En,An=e(function(t){(t.exports=function(t,e){var n,r,i,o,a;return arguments.length<2||"string"!=typeof t?(o=e,e=t,t=null):o=arguments[2],sn(t)?(n=Mn.call(t,"c"),r=Mn.call(t,"e"),i=Mn.call(t,"w")):(n=i=!0,r=!1),a={value:e,configurable:n,enumerable:r,writable:i},o?kn(On(o),a):a}).gs=function(t,e,n){var r,i,o,a;return"string"!=typeof t?(o=n,n=e,e=t,t=null):o=arguments[3],sn(e)?dn(e)?sn(n)?dn(n)||(o=n,n=void 0):n=void 0:(o=e,e=n=void 0):e=void 0,sn(t)?(r=Mn.call(t,"c"),i=Mn.call(t,"e")):(r=!0,i=!1),a={get:e,set:n,configurable:r,enumerable:i},o?kn(On(o),a):a}}),Rn=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},Ln=e(function(t,e){var n,r,i,o,a,s,c,u=Function.prototype.apply,l=Function.prototype.call,f=Object.create,h=Object.defineProperty,p=Object.defineProperties,d=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};a={on:n=function(t,e){var n;return Rn(e),d.call(this,"__ee__")?n=this.__ee__:(n=v.value=f(null),h(this,"__ee__",v),v.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:r=function(t,e){var r,o;return Rn(e),o=this,n.call(this,t,r=function(){i.call(o,t,r),u.call(e,this,arguments)}),r.__eeOnceListener__=e,this},off:i=function(t,e){var n,r,i,o;if(Rn(e),!d.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:o=function(t){var e,n,r,i,o;if(d.call(this,"__ee__")&&(i=this.__ee__[t]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)u.call(r,this,o)}else switch(arguments.length){case 1:l.call(i,this);break;case 2:l.call(i,this,arguments[1]);break;case 3:l.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];u.call(i,this,o)}}},s={on:An(n),once:An(r),off:An(i),emit:An(o)},c=p({},s),t.exports=e=function(t){return null==t?f(c):p(Object(t),s)},e.methods=a}),Cn=(Ln.methods,function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,r=e.method,i=void 0===r?"GET":r,o=e.type,a=void 0===o?"arraybuffer":o,s=e.timeout,c=void 0===s?1e4:s,u=e.data,l=void 0===u?{}:u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(this,t),new rn(function(t,e){var r=new window.XMLHttpRequest,o=i.toUpperCase(),s=[];a&&(r.responseType=a),c&&(r.timeout=c);for(var u in l)s.push("k="+l[u]);if(r.onload=function(){200===r.status||206===r.status?t({context:f,res:r}):e({context:f,res:r,type:"error"})},r.onerror=function(t){e({context:f,res:r,type:"error"})},r.ontimeout=function(t){e({context:f,res:r,type:"error"})},r.onabort=function(){e({context:f,res:r,type:"error"})},"GET"===o)r.open(o,""+n),r.send();else{if("post"!==o)throw new Error("xhr "+o+" is not supported");r.open(o,n),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(s.join("&"))}})}),Nn=/^WEBVTT/,In=/^STYLE+$/,Fn=/^\:\:cue/,zn=/^}+$/,Bn=/^\[Script Info\].*/,Hn=[/[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}:[0-9]{2}\.[0-9]{3}/,/[0-9]{2}:[0-9]{2}\.[0-9]{3}-->[0-9]{2}:[0-9]{2}\.[0-9]{3}/,/[0-9]{2}\.[0-9]{3}-->[0-9]{2}\.[0-9]{3}/],Vn=/^(<?.+?>(([\s\S])*?)<\/?.+?>)$/,Dn=/^Format:\s/,Wn=/^Style:\s/,Gn=/^Dialogue:\s/,Un=function(){function t(){_(this,t)}return G(t,null,[{key:"parse",value:function(e,n){var r=t.checkFormat(e);r||n({format:r});try{var i=[];"ass"===r?i=t.parseASS(e):"vtt"===r&&(i=t.parseVTT(e)),n({format:r,list:i.list,styles:i.styles})}catch(t){console.error(t),n({format:r},t)}}},{key:"parseASSItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.split(","),i={},a="";try{var s=n.length-e.length;return a=s>0?n.splice(e.length-1,s+1).join(",")+"":n[n.length-1]+"",a=a.replace(/\\n+/g,""),a=o(a),n[e.length-1]=a,e.map(function(t,e){"end"===t||"start"===t?i[t]=r(n[e].split(":")):"text"===t?i[t]=[n[e]]:"layer"===t?(i[t]=[n[e]],i.textTag=[n[e]]):i[t]="style"===t?[n[e]]:Number(n[e])?Number(n[e]):n[e]}),i}catch(t){return console.error(t),{}}}},{key:"parseASS",value:function(e){for(var n=e.split("\n"),r=[],i=0,o=0,a=[],s=[],c=null;i<n.length;){if(Dn.test(n[i]))s=(s=n[i].replace(Dn,"").replace(/\s+/g,"").split(",")).map(function(t){return t.toLocaleLowerCase()});else if(Wn.test(n[i]))a.push(n[i].replace(Wn,"").replace(/\s+/g,""));else if(Gn.test(n[i])){var u=t.parseASSItem(n[i].replace(Gn,""),s);if(c&&u.start===c.start&&u.end===c.end)try{var l=c,f=l.text,h=l.textTag,p=l.style;f.push(u.text[0]),h.push(u.textTag[0]),p.push(u.style[0])}catch(t){console.error(t)}else{c=u;var d=null;o%50==0?((d={start:c.start,end:c.end,list:[]}).list.push(c),r.push(d)):((d=r[r.length-1]).end=c.end,d.list.push(c)),o++}}i++}return{list:r,style:{}}}},{key:"parseVTTStyle",value:function(t,e){console.log("parseVTTStyle",t);var n=t.split(":");if(n.length>1){var r=n[0].trim().split("-"),i="";r.length>1?r.map(function(t,e){i+=0===e?t:t.charAt(0).toUpperCase()+t.slice(1)}):i=r[0],e[i]=n[1].trim().replace(/;$/,"")}return e}},{key:"parseVTT",value:function(t){for(var e=(t=t.replace(Nn,"")).split("\n"),n=[],r=0,o=0,s=null,c=null,u=!1,l=!1,f=null,h=null,p=[];r<e.length;){var d=a(r,e).trim();if(!d||u&&i(d))u=!d;else if(Fn.test(d)&&In.test(a(r-1,e).trim())){l=!0;var v=/\((.+?)\)/g.exec(d);h=v?v[1]:"",f=""}else if(l)zn.test(d)?(p.push({key:h,style:f}),f=null,h=null,l=!1):f+=d;else if(d){u=!1;var y=this.checkIsTime(e[r]);if(y){var g=this.parseVttTime(y);if(!s||g.start!==s.start||g.end!==s.end){(s=g).text=[],s.textTag=[];var m=null;o%50==0?((m={start:s.start,end:s.end,list:[]}).list.push(s),n.push(m)):((m=n[n.length-1]).end=s.end,m.list.push(s)),o++}}else if(s){var _=s,b=_.text,x=_.textTag,k=this.parseVttText(e[r]);0===x.length||c||k.tag&&k.tag!==x[x.length-1]?(b.push(k.text),x.push(k.tag)):b[x.length-1]+=k.text}c=y,u=!1}r++}return{list:n,styles:p}}},{key:"checkIsTime",value:function(t){t=t.replace(/\s+/g,"");for(var e=0,n=null;e<Hn.length&&!(n=Hn[e].exec(t));)e++;return n?n[0]:null}},{key:"parseVttText",value:function(t){var e=Vn.exec(t),n="",r="default";e?(n=e[e.length-2],r=/^(<?.+?>)/gi.exec(t)[0].replace(/\<|\>|\&/g,"")):n=t;for(var i=/<(\w+).(\w+)>/g,a=i.exec(n);a&&a.length>2;)n=n.replace(a[0],"<"+a[1]+' class="'+a[2]+'">'),a=i.exec(n);return{tag:r,text:o(n.replace(/\\n+/g,""))}}},{key:"parseVttTime",value:function(t){var e=t.split("--\x3e"),n=void 0,i=0;if(e.length=2){var o=e[0].split(":"),a=e[1].split(":");n=r(o),i=r(a)}return{start:n,end:i,time:t}}},{key:"isVTT",value:function(t){return Nn.test(t)}},{key:"isASS",value:function(t){return Bn.test(t)}},{key:"checkFormat",value:function(t){return t?Nn.test(t)?"vtt":Bn.test(t)?"ass":null:null}}]),t}(),$n={f:Tt},Kn=$n.f("iterator"),Xn=e(function(t){t.exports={default:Kn,__esModule:!0}});t(Xn);var Yn=e(function(t){var e=ut("meta"),n=C.f,r=0,i=Object.isExtensible||function(){return!0},o=!O(function(){return i(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},s=function(t,n){if(!T(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!z(t,e)){if(!i(t))return"F";if(!n)return"E";a(t)}return t[e].i},c=function(t,n){if(!z(t,e)){if(!i(t))return!0;if(!n)return!1;a(t)}return t[e].w},u=function(t){return o&&l.NEED&&i(t)&&!z(t,e)&&a(t),t},l=t.exports={KEY:e,NEED:!1,fastKey:s,getWeak:c,onFreeze:u}}),Jn=(Yn.KEY,Yn.NEED,Yn.fastKey,Yn.getWeak,Yn.onFreeze,C.f),qn=function(t){var e=x.Symbol||(x.Symbol={});"_"==t.charAt(0)||t in e||Jn(e,t,{value:$n.f(t)})},Zn={f:Object.getOwnPropertySymbols},Qn={f:{}.propertyIsEnumerable},tr=function(t){var e=yt(t),n=Zn.f;if(n)for(var r,i=n(t),o=Qn.f,a=0;i.length>a;)o.call(t,r=i[a++])&&e.push(r);return e},er=Array.isArray||function(t){return"Array"==Z(t)},nr=vt.concat("length","prototype"),rr={f:Object.getOwnPropertyNames||function(t){return dt(t,nr)}},ir=rr.f,or={}.toString,ar="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],sr=function(t){try{return ir(t)}catch(t){return ar.slice()}},cr={f:function(t){return ar&&"[object Window]"==or.call(t)?sr(t):ir(tt(t))}},ur=Object.getOwnPropertyDescriptor,lr={f:j?ur:function(t,e){if(t=tt(t),e=R(e,!0),A)try{return ur(t,e)}catch(t){}if(z(t,e))return N(!Qn.f.call(t,e),t[e])}},fr=Yn.KEY,hr=lr.f,pr=C.f,dr=cr.f,vr=b.Symbol,yr=b.JSON,gr=yr&&yr.stringify,mr=Tt("_hidden"),_r=Tt("toPrimitive"),br={}.propertyIsEnumerable,xr=at("symbol-registry"),kr=at("symbols"),wr=at("op-symbols"),Tr=Object.prototype,Sr="function"==typeof vr&&!!Zn.f,Or=b.QObject,jr=!Or||!Or.prototype||!Or.prototype.findChild,Pr=j&&O(function(){return 7!=wt(pr({},"a",{get:function(){return pr(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=hr(Tr,e);r&&delete Tr[e],pr(t,e,n),r&&t!==Tr&&pr(Tr,e,r)}:pr,Er=function(t){var e=kr[t]=wt(vr.prototype);return e._k=t,e},Mr=Sr&&"symbol"==typeof vr.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof vr},Ar=function(t,e,n){return t===Tr&&Ar(wr,e,n),S(t),e=R(e,!0),S(n),z(kr,e)?(n.enumerable?(z(t,mr)&&t[mr][e]&&(t[mr][e]=!1),n=wt(n,{enumerable:N(0,!1)})):(z(t,mr)||pr(t,mr,N(1,{})),t[mr][e]=!0),Pr(t,e,n)):pr(t,e,n)},Rr=function(t,e){S(t);for(var n,r=tr(e=tt(e)),i=0,o=r.length;o>i;)Ar(t,n=r[i++],e[n]);return t},Lr=function(t,e){return void 0===e?wt(t):Rr(wt(t),e)},Cr=function(t){var e=br.call(this,t=R(t,!0));return!(this===Tr&&z(kr,t)&&!z(wr,t))&&(!(e||!z(this,t)||!z(kr,t)||z(this,mr)&&this[mr][t])||e)},Nr=function(t,e){if(t=tt(t),e=R(e,!0),t!==Tr||!z(kr,e)||z(wr,e)){var n=hr(t,e);return!n||!z(kr,e)||z(t,mr)&&t[mr][e]||(n.enumerable=!0),n}},Ir=function(t){for(var e,n=dr(tt(t)),r=[],i=0;n.length>i;)z(kr,e=n[i++])||e==mr||e==fr||r.push(e);return r},Fr=function(t){for(var e,n=t===Tr,r=dr(n?wr:tt(t)),i=[],o=0;r.length>o;)!z(kr,e=r[o++])||n&&!z(Tr,e)||i.push(kr[e]);return i};Sr||(Y((vr=function(){if(this instanceof vr)throw TypeError("Symbol is not a constructor!");var t=ut(arguments.length>0?arguments[0]:void 0),e=function(n){this===Tr&&e.call(wr,n),z(this,mr)&&z(this[mr],t)&&(this[mr][t]=!1),Pr(this,t,N(1,n))};return j&&jr&&Pr(Tr,t,{configurable:!0,set:e}),Er(t)}).prototype,"toString",function(){return this._k}),lr.f=Nr,C.f=Ar,rr.f=cr.f=Ir,Qn.f=Cr,Zn.f=Fr,$n.f=function(t){return Er(Tt(t))}),H(H.G+H.W+H.F*!Sr,{Symbol:vr});for(var zr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Br=0;zr.length>Br;)Tt(zr[Br++]);for(var Hr=yt(Tt.store),Vr=0;Hr.length>Vr;)qn(Hr[Vr++]);H(H.S+H.F*!Sr,"Symbol",{for:function(t){return z(xr,t+="")?xr[t]:xr[t]=vr(t)},keyFor:function(t){if(!Mr(t))throw TypeError(t+" is not a symbol!");for(var e in xr)if(xr[e]===t)return e},useSetter:function(){jr=!0},useSimple:function(){jr=!1}}),H(H.S+H.F*!Sr,"Object",{create:Lr,defineProperty:Ar,defineProperties:Rr,getOwnPropertyDescriptor:Nr,getOwnPropertyNames:Ir,getOwnPropertySymbols:Fr});var Dr=O(function(){Zn.f(1)});H(H.S+H.F*Dr,"Object",{getOwnPropertySymbols:function(t){return Zn.f(Mt(t))}}),yr&&H(H.S+H.F*(!Sr||O(function(){var t=vr();return"[null]"!=gr([t])||"{}"!=gr({a:t})||"{}"!=gr(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(T(e)||void 0!==t)&&!Mr(t))return er(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Mr(e))return e}),r[1]=e,gr.apply(yr,r)}}),vr.prototype[_r]||I(vr.prototype,_r,vr.prototype.valueOf),jt(vr,"Symbol"),jt(Math,"Math",!0),jt(b.JSON,"JSON",!0),qn("asyncIterator"),qn("observable");var Wr=x.Symbol,Gr=e(function(t){t.exports={default:Wr,__esModule:!0}});t(Gr);var Ur=t(e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(Xn),i=n(Gr),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}})),$r=function(){function t(){var e=this;_(this,t),this.__handlers=[],window.ResizeObserver&&(this.observer=new window.ResizeObserver(function(t){(new Date).getTime();e.__trigger(t)}))}return G(t,[{key:"addObserver",value:function(t,e){if(this.observer){this.observer&&this.observer.observe(t);for(var n=this.__handlers,r=-1,i=0;i<n.length;i++)n[i]&&t===n[i].target&&(r=i);r>-1?this.__handlers[r].handler.push(e):this.__handlers.push({target:t,handler:[e]})}}},{key:"unObserver",value:function(t){var e=-1;this.__handlers.map(function(n,r){t===n.target&&(e=r)}),this.observer&&this.observer.unobserve(t),e>-1&&this.__handlers.splice(e,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(t,e){for(var n=this.__handlers,r=0;r<n.length;r++)if(n[r]&&t===n[r].target){n[r].handler&&n[r].handler.map(function(n){try{n(t,e)}catch(t){console.error(t)}});break}}},{key:"__trigger",value:function(t){var e=this;t.map(function(t){var n=t.contentRect;e.__runHandler(t.target,n)})}}]),t}(),Kr=null;!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}('xg-text-track.xg-text-track {\n  font-family: "PingFang SC","SF Pro SC","SF Pro Text","SF Pro Icons","Helvetica Neue","Helvetica","Arial",sans-serif;\n  -webkit-font-smoothing: antialiased;\n  position: absolute;\n  bottom: 0;\n  color: #fff;\n  left: 0;\n  right: 0;\n  pointer-events: none; }\n  xg-text-track.xg-text-track.text-track-no-fitvideo {\n    margin-bottom: 2%; }\n  xg-text-track.xg-text-track.text-track-hide {\n    opacity: 0;\n    visibility: hidden; }\n  xg-text-track.xg-text-track.text-track-show {\n    opacity: 1;\n    visibility: visible; }\n  xg-text-track.xg-text-track xg-text-track-inner {\n    display: block;\n    position: relative;\n    left: 50%;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    max-width: 92%; }\n  xg-text-track.xg-text-track xg-text-track-span {\n    display: -webkit-box;\n    text-align: center;\n    text-overflow: ellipsis;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    padding: 1px 4px;\n    -webkit-line-clamp: 1;\n    line-height: 120%;\n    word-break: break-all; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-deputy {\n      font-size: 76%; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-single {\n      -webkit-line-clamp: 1; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-double {\n      -webkit-line-clamp: 2; }\n    xg-text-track.xg-text-track xg-text-track-span.text-track-three {\n      -webkit-line-clamp: 3; }\n  xg-text-track.xg-text-track.text-track-bg xg-text-track-span {\n    background-color: rgba(0, 0, 0, .54);\n    border-radius: 2px; }\n  xg-text-track.xg-text-track.text-track-stroke xg-text-track-inner {\n    background-color: none;\n    border-radius: 0;\n    text-shadow: -1px 1px 0 rgba(0, 0, 0, .7), 1px 1px 0 rgba(0, 0, 0, .7), 1px -1px 0 rgba(0, 0, 0, .7), -1px -1px 0 rgba(0, 0, 0, .7); }\n');var Xr=[{code:0,msg:"SUCCESS"},{code:1,msg:"LOAD_ERROR"},{code:2,msg:"PARSER_ERROR"},{code:3,msg:"FORMAT_NOT_SUPPORTED"},{code:4,msg:"ID_OR_LANGUAGE_NOT_EXIST"},{code:5,msg:"PARAMETERS_ERROR"},{code:6,msg:"ABORT"},{code:7,msg:"UNKNOWN"}],Yr={RESIZE:"resize"},Jr=!1;return function(){function t(e){var n=this;_(this,t),Ln(this),Jr=h(),this.currentText=null,this.textTrack=[],this._cid=-1,this._gid=-1,this._iId=null,this._iC=0,this.player=null,this.root=null,this.config={line:"double",bottom:0,mode:"stroke",defaultOpen:!1,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,fitVideo:!0,offsetBottom:2,fontColor:"#fff"},this._loadingTrack={},an(this.config).map(function(t){void 0!==e[t]&&null!==e[t]&&(n.config[t]=e[t])}),this._isOpen=this.config.defaultOpen||!1,this._videoMeta={scale:0,videoHeight:0,videoWidth:0,lwidth:0,lheight:0,vWidth:0,vHeight:0,vBottom:0,vLeft:0,marginBottom:0},e.subTitles&&"Array"===f(e.subTitles)&&(this.setSubTitles(e.subTitles),e.player&&this.attachPlayer(e.player),this.currentText&&g(this.currentText).then(function(t){n.addStyles(t)}))}return G(t,[{key:"setSubTitles",value:function(){var t=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){var n={};an(e).map(function(t){n[t]=e[t]}),n.isDefault&&(t.currentText=n),t.textTrack.push(n)})}},{key:"addStyles",value:function(t){var e=t.styles,n=t.format;e&&"vtt"===n&&(e.map(function(t){t.key||(t.key="xg-text-track-span")}),p(e,"xg-text-track"))}},{key:"attachPlayer",value:function(t){var e=this;if(t){this.player&&this.detachPlayer();var n=this.config,r=n.fontColor,i=n.mode,o=n.fitVideo;this.player=t,this.root=document.createElement("xg-text-track"),this.root.className="xg-text-track",!this._isOpen&&c(this.root,"text-track-hide"),!o&&c(this.root,"text-track-no-fitvideo"),i&&c(this.root,"text-track-"+i),this.innerRoot=document.createElement("xg-text-track-inner"),this.root.appendChild(this.innerRoot),r&&(this.root.style.color=r),this.currentText&&["language","id","label"].map(function(t){e.root.setAttribute("data-"+t,e.currentText[t]||"")}),this.player.root.appendChild(this.root),["destroy","__onTimeupdate","_onResize"].map(function(t){e[t]=e[t].bind(e)}),this.player.on("destroy",this.destroy),this.player.on("timeupdate",this.__onTimeupdate),d(t.root,this._onResize)}}},{key:"detachPlayer",value:function(){var t=this.player;t&&(t.off("destroy",this.destroy),t.off("timeupdate",this.__onTimeupdate),t.root&&(v(t.root,this._onResize),t.root.removeChild(this.root)),this.innerRoot=null,this.root=null,this.player=null)}},{key:"switch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return this._loadingTrack=e,new rn(function(n,r){if(!e.id&&!e.language)if(t.currentText){t._loadingTrack={},t._updateCurrent(t.currentText),t._isOpen=!0,t.show();var i=y(0,{message:"switch default subtitle success"});console.trace(i),n(i)}else{var o=y(5,{message:"no default subtitle"});console.trace(o),r(o)}if(t.currentText&&m(e,t.currentText))t._loadingTrack={},t._updateCurrent(t.currentText),t._isOpen=!0,t.show(),n(y(0));else{for(var a=null,s=0;s<t.textTrack.length;s++)if(m(e,t.textTrack[s])){a=t.textTrack[s];break}if(a)a.list?(t._loadingTrack={},t._updateCurrent(a),t._isOpen=!0,t.show(),n(y(0))):g(a).then(function(e){if(t.addStyles(e),t._loadingTrack.id===a.id||t._loadingTrack.language===e.language)t._loadingTrack={},t._updateCurrent(e),t._isOpen=!0,t.show(),n(y(0));else{var i=y(6,{message:"check _loadingTrack fail id: "+t._loadingTrack.id+"  nextSubtitle:"+e.id});console.trace(i),r(i)}}).catch(function(t){r(t)});else{var c=y(4,new Error("The is no subtitle with id:[{"+e.id+"}] or language:["+e.language+"]"));console.trace(c),r(c)}}})}},{key:"switchOff",value:function(){this._isOpen=!1,this.hide()}},{key:"_updateCurrent",value:function(t){var e=this;this.currentText=t,["language","id","label"].map(function(t){e.root.setAttribute("data-"+t,e.currentText[t]||"")});var n=this.player.currentTime,r=l(n,this.currentText.list,this._gid),i=-1;if(r>-1&&(i=l(n,this.currentText.list[r].list,this._cid)),this._gid=r,this._cid=i,i<0)return void this.__render();this.__render(this.currentText.list[r].list[i])}},{key:"__loadAll",value:function(){this.textTrack.map(function(t){g(t)})}},{key:"__onTimeupdate",value:function(){if(this._isOpen){var t=this.player.video,e=t.videoWidth,n=t.videoHeight;!this._videoMeta.scale&&e&&n&&this._onResize(this.player.root);var r=this.player.currentTime;if(this.currentText&&this.currentText.list){var i=l(r,this.currentText.list,this._gid),o=-1;if(i>-1&&(o=l(r,this.currentText.list[i].list,this._cid)),o<0)return void this.__render();o===this._cid&&i===this._gid||(this._cid=o,this._gid=i,this.__render(this.currentText.list[i].list[o]))}}}},{key:"_onResize",value:function(t){var e=this._videoMeta;if(t&&t instanceof window.Element||(t=this.player.root),this._iId&&(clearTimeout(this._iId),this._iId=null),!e.scale){if(!this.player.video)return;var n=this.player.video,r=n.videoWidth,i=n.videoHeight;if(!r||!i)return;e.videoWidth=r,e.videoHeight=i,e.scale=parseInt(i/r*100,10)}this.__startResize(t)}},{key:"resize",value:function(t,e){var n=this,r=this.config,i=r.baseSizeX,o=r.baseSizeY,a=r.minMobileSize,s=r.minSize,c=r.fitVideo,u=(r.offsetLeft,r.offsetBottom),l=this._videoMeta.scale;this._videoMeta.lwidth=t,this._videoMeta.lheight=e;var f=void 0,h=0;e/t*100>=l?(h=parseInt(l*t,10)/100,f=t):(h=e,f=parseInt(e/l*100,10)),this._videoMeta.vWidth=f,this._videoMeta.vHeight=h;var p=0,d=0;l>120?(p=o,d=parseInt(p*h/1080,10)):(p=i,d=parseInt(p*f/1920,10));var v=Jr?a:s,y={fontSize:d=d<v?v:d>p?p:d},g=parseInt((e-h)/2,10),m=parseInt((t-f)/2,10),_=parseInt(h*u,10)/100;this._videoMeta.vBottom=g,this._videoMeta.vLeft=m,this._videoMeta.marginBottom=_,c&&(y.bottom=g+_,y.left=y.right=m),an(y).map(function(t){n.root.style[t]=y[t]+"px"}),this.emit(Yr.RESIZE,{vLeft:m,vBottom:g,marginBottom:_,vWidth:f,vHeight:h,fontSize:d,scale:l})}},{key:"__startResize",value:function(t){var e=this,n=t.getBoundingClientRect(),r=this._videoMeta,i=n.width,o=n.height;if(this._iId&&(clearTimeout(this._iId),this._iId=null),i>0&&o>0&&(i!==r.lwidth||o!==r.lheight))this._iC=0,this.resize(i,o);else{if(this._iC>=5)return void(this._iC=0);this._iC++,this._iId=setTimeout(function(){e.__startResize(t)},50)}}},{key:"__render",value:function(t){if(t){var e="text-track-"+this.config.line;this.root.setAttribute("data-start",t.start),this.root.setAttribute("data-end",t.end);var n="";t.text.map(function(r,i){i>0&&(e+=" text-track-deputy"),n+='<xg-text-track-span class="'+e+'" data-tag="'+t.textTag[i]+'">'+r+"</xg-text-track-span>"}),this.innerRoot.innerHTML=n}else this.innerRoot.innerHTML=""}},{key:"show",value:function(){u(this.root,"text-track-hide")}},{key:"hide",value:function(){c(this.root,"text-track-hide"),this.innerRoot.innerHTML=""}},{key:"destroy",value:function(){this.detachPlayer(),this.player=null,this.textTrack=null}},{key:"marginBottom",get:function(){var t=this._videoMeta,e=t.bottom,n=t.marginBottom;return this.config.fitVideo?e+n:n}}]),t}()});
//# sourceMappingURL=index.min.js.map
